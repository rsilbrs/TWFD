<!doctype html>
<html lang="en">
	<head>
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <meta name="description" content="">
	    <title>Workflow Designer · TOMEs 7</title>

	    <!-- Bootstrap core CSS -->
			<link href="assets/dist/css/bootstrap.css" rel="stylesheet">
	    <!-- Custom styles for this template -->
		    <link href="assets/dist/css/customStyle.css" rel="stylesheet">
		    <link href="assets/dist/css/events.css" rel="stylesheet">

	    <!-- Language definitions -->
	    	<script src="assets/dist/js/languages.js"></script>

	</head>

	<body>

		<main class="container">
			<div class="row top">
				<div class="col-4 logo"></div>
				<ul class="topMenu col-8">
					<li>
						<a href="https://forms.office.com/Pages/ResponsePage.aspx?id=KPt2bgpSWUeYaR-PxJ5xGWZ8t3-DqldNpFoGVoc3WfNURVIyVDFJVTJMQUlTM1BRRE1UWlpOR05ITi4u" target="blank">
							<script>language('Menu_Feedback')</script>
						</a>
					</li>
					<li data-toggle="modal" data-target="#contactModal">
						<script>language('Menu_Contact')</script>
					</li>
				</ul>
			</div>

			<div class="row">
				<div class="col-4 events">

					<div class="title"><script>language('Available_Events')</script></div>

					<button type="button" class="btn btn-primary btn-sm btn-block" data-toggle="modal" data-target="#FormEventModal" onclick="formCreateOptions('blank')">
						<script>language('Create_new_event')</script>
					</button>

					<div class="subEvents">
						<div class="title"><script>language('Barcode_Events')</script></div>

						<div id="eventBarcodeList" class="column">
							<!-- Barcode events -->
						</div>

					</div>				

					<div class="subEvents">
						<div class="title"><script>language('Info_Events')</script></div>

						<div id="eventInfoList" class="column">
							<!-- Inform events -->
						</div>

					</div>


					<div class="subEvents">
						<div class="title"><script>language('Timer_Events')</script></div>

						<div id="eventTimerList" class="column">
							<!-- Inform events -->
						</div>

					</div>

					<div class="bottonOptions">
						
						<div id="loadDemoOptions" onclick="populateEvents('load')">
							<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-upload" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
								<path fill-rule="evenodd" d="M.5 8a.5.5 0 0 1 .5.5V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8.5a.5.5 0 0 1 1 0V12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.5A.5.5 0 0 1 .5 8zM5 4.854a.5.5 0 0 0 .707 0L8 2.56l2.293 2.293A.5.5 0 1 0 11 4.146L8.354 1.5a.5.5 0 0 0-.708 0L5 4.146a.5.5 0 0 0 0 .708z"/>
								<path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0v-8A.5.5 0 0 1 8 2z"/>
							</svg>
							<script>language('Demo_events')</script>
						</div>

						<div class="languageOptions">
							<ul>
								<li onclick="loadLanguage('EN')">EN</li>
								<li onclick="loadLanguage('ES')">ES</li>
								<li onclick="loadLanguage('PT')">PT</li>
							</ul>
						</div>

					</div>
						

				</div>
				<div class="col-1"></div>
				<div class="col-7 procedure">
					<div class="title"><script>language('Program_flow')</script></div>

					<div id="flowStep">
						<!-- Program flow steps list -->
					</div>

					<button class="printReport" onclick="window.print()">
						<svg class="bi bi-file-earmark-arrow-down" width="1.2em" height="1.2em" viewBox="0 0 16 18" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
						  <path d="M4 1h5v1H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6h1v7a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/>
						  <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 0 1 9 4.5z"/>
						  <path fill-rule="evenodd" d="M5.646 9.146a.5.5 0 0 1 .708 0L8 10.793l1.646-1.647a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 0-.708z"/>
						  <path fill-rule="evenodd" d="M8 6a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0v-4A.5.5 0 0 1 8 6z"/>
						</svg>
						<script>language('Save_Report')</script>
					</button>
				</div>
			</div>

			<div class="row">
				<div class="col-12 copyright">
					©2020 TERUMO BCT, INC. ALL RIGHTS RESERVED
				</div>
			</div>

		</main>
		<!-- /.container -->

		<!-- MODAL -->

			<!-- Initial Modal -->
				<div class="modal fade show" id="initialModal" tabindex="-1" role="dialog" aria-hidden="true" style="display: block;">
				  <div class="modal-dialog " role="document">
				    <div class="modal-content">

				      <div class="modal-header">
				        <h5 class="modal-title">Trima Accel Workflow Designer</h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick = "$('.modal').hide()">
				          <span aria-hidden="true">&times;</span>
				        </button>
				      </div>

				      <div class="modal-body">
				      	<script>language('Initial_Message1')</script>
				      	<br><br>

						<strong>
							<script>language('Initial_Message2')</script>
						</strong>
						<br>
						
						<script>language('Initial_Message3')</script>
				      </div>

				    </div>
				  </div>
				</div>
			<!-- /.initial modal -->

			<!-- Contact Modal -->
				<div class="modal fade" id="contactModal" tabindex="-1" role="dialog" aria-hidden="true">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">

				      <div class="modal-header">
				        <h5 class="modal-title">
				        	<script>language('Menu_Contact')</script>
				        </h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				          <span aria-hidden="true">&times;</span>
				        </button>
				      </div>

				      <div class="modal-body">
				      	
						<script>language('Contect_Message1')</script>
						<strong>
							<script>language('Contact_Message2')</script> ricardo.silva@terumobct.com
						</strong>

				      </div>

				    </div>
				  </div>
				</div>
			<!-- /.contact modal -->

			<!-- Event Modal -->
				<div class="modal fade" id="TrimaScreenModal" tabindex="-1" role="dialog" aria-hidden="true">
				  <div class="modal-dialog modal-xl" role="document">
				    <div class="modal-content">

				      <div class="modal-header">
				        <h5 class="modal-title">Trima Accel & TOMEs - <script>language('Screen_Simulation')</script></h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				          <span aria-hidden="true">&times;</span>
				        </button>
				      </div>

				      <div class="modal-body">
				      	
						<iframe id="TrimaScreenFrame" src="" scrolling="no" frameborder="0" width="705px" height="520px"></iframe>

				      </div>

				    </div>
				  </div>
				</div>
			<!-- /.event modal -->

			<!-- New Event Form Modal -->
				<div class="modal fade" id="FormEventModal" tabindex="-1" role="dialog" aria-hidden="true">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">

				      <div class="modal-header">
				        <h5 class="modal-title"><script>language('Create_new_event')</script></h5>
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				          <span aria-hidden="true">&times;</span>
				        </button>
				      </div>

				      <div class="modal-body">
						<div class="container-fluid">

							<div class="alert alert-secondary">
								<script>language('New_event_description')</script><br>
								<strong><script>language('New_event_instruction')</script></strong>
							</div>

							<form name="fromCreateNewEvent" id="fromCreateNewEvent">
								<div class="form-group">
									<label for="inputState">
										<script>language('New_event-define-type')</script>
									</label>
									<select id="formEventClass" class="form-control" onchange="formCreateOptions(this.value)">
										<option value="barcode" selected>
											<script>language('New_event-barcode')</script>
										</option>
										<option value="informationBtn">
											<script>language('New_event-button')</script>
										</option>
										<option value="information">
											<script>language('New_event-infom')</script>
										</option>
									</select>
								</div>

								<div class="form-group">
									<label for="inputState">
										<script>language('New_event-define_name')</script>
									</label>
									<input type="text" class="form-control" id="formEventName">
								</div>

								<div class="form-group">

									<label for="inputState">
										<script>language('New_event-description')</script>
									</label>
									<input type="text" class="form-control" id="formEventDetails">

								</div>

								<div class="form-group" id="creatEventOptions" style="display: none">

									<label for="inputState">
										<script>language('New_event-options')</script>
									</label>

									<div class="form-row">

										<div class="col-2">
									      <input type="text" class="form-control" maxlength="12" id="formEventBtn1">
									    </div>
									    <div class="col-2">
									      <input type="text" class="form-control" maxlength="12" id="formEventBtn2">
									    </div>
									    <div class="col-2">
									      <input type="text" class="form-control" maxlength="12" id="formEventBtn3">
									    </div>
									    <div class="col-2">
									      <input type="text" class="form-control" maxlength="12" id="formEventBtn4">
									    </div>
									    <div class="col-2">
									      <input type="text" class="form-control" maxlength="12" id="formEventBtn5">
									    </div>

									</div>

								</div>

								<div class="btn btn-primary btn-block" onclick="formCreate(); document.getElementById('fromCreateNewEvent').reset()" data-dismiss="modal" aria-label="Close">
									<script>language('Create')</script>
								</div>

							</form>

						</div>
				      </div>

				    </div>
				  </div>
				</div>
			<!-- /.new event form modal -->

			<div id="programScreenModal">
				<!-- Trima screen exaple - Modal -->
			</div>
		
		<!-- /.SCREEN SAMPLE -->


		<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
		<script src="assets/dist/js/bootstrap.min.js"></script>
		<script src="assets/dist/js/bootstrap.bundle.js"></script>
		<script src="assets/dist/js/stopExecutionOnTimeout-157cd5b220a5c80d4ff8e0e70ac069bffd87a61252088146915e8726e5d9f147.js"></script>
		<script src='assets/dist/js/jquery.min.js'></script>
		<script src='assets/dist/js/jquery-ui.min.js'></script>
		<script src="assets/dist/js/dragDrop.js"></script>

		<script>
			//Display 5 fields to create the differents buttons
				function formCreateOptions(eventClass){
					if(eventClass == "informationBtn"){
						document.getElementById("creatEventOptions").style = "display:block"
					} else {
						document.getElementById("creatEventOptions").style = "display:none"
					}
				}

			//Events List Demo
				var eventList = language('demoEvents');

			//Create new Event baed on form values
				function formCreate() {
					var createEventClass 	= document.getElementById("formEventClass").value;
					var createEventName 	= document.getElementById("formEventName").value;
					var createEventDetails 	= document.getElementById("formEventDetails").value;

					var createEventBtns;

					if(createEventClass == "information"){
						createEventBtns = ["","","Ok","",""];
					} else if(createEventClass == "informationBtn"){
						//Populate each btn with the text content
							createEventBtn1 = document.getElementById("formEventBtn1").value;
							createEventBtn2 = document.getElementById("formEventBtn2").value;
							createEventBtn3 = document.getElementById("formEventBtn3").value;
							createEventBtn4 = document.getElementById("formEventBtn4").value;
							createEventBtn5 = document.getElementById("formEventBtn5").value;

						// Create the value with all information
							createEventBtns = [createEventBtn1, createEventBtn2, createEventBtn3, createEventBtn4, createEventBtn5];
					}

					eventList.push([createEventClass, createEventName, createEventDetails, createEventBtns]);

					populateEvents('add');

				}

				

			var eventIcon;
			var divEvent;
			var divEventBarcode = "";
			var divEventInfo = "";
			var divEventTimer = "";

			var eventTitle;
			var eventClass;

			// Function to create Icon for each event
				function eventIconCreate(eventClassIcon){
					//Normalize the differents Infos Events
					if(eventClassIcon == "information" || (eventClassIcon == "informationBtn")){
						eventClassIcon = "information";
					}

					// Define the icon based on event class
					switch(eventClassIcon){
						case "barcode":
							eventIcon = '<svg class="bi bi-upc" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"/></svg>';
							break;
						case "repetition":
							eventIcon = '<svg class="bi bi-upc" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"/></svg>';
							break;	
						case "information":
							eventIcon = '<svg class="bi bi-hand-index" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6.75 1a.75.75 0 0 0-.75.75V9a.5.5 0 0 1-1 0v-.89l-1.003.2a.5.5 0 0 0-.399.546l.345 3.105a1.5 1.5 0 0 0 .243.666l1.433 2.15a.5.5 0 0 0 .416.223h6.385a.5.5 0 0 0 .434-.252l1.395-2.442a2.5 2.5 0 0 0 .317-.991l.272-2.715a1 1 0 0 0-.995-1.1H13.5v1a.5.5 0 0 1-1 0V7.154a4.208 4.208 0 0 0-.2-.26c-.187-.222-.368-.383-.486-.43-.124-.05-.392-.063-.708-.039a4.844 4.844 0 0 0-.106.01V8a.5.5 0 0 1-1 0V5.986c0-.167-.073-.272-.15-.314a1.657 1.657 0 0 0-.448-.182c-.179-.035-.5-.04-.816-.027l-.086.004V8a.5.5 0 0 1-1 0V1.75A.75.75 0 0 0 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 0 0-3.5 0v5.34l-1.199.24a1.5 1.5 0 0 0-1.197 1.636l.345 3.106a2.5 2.5 0 0 0 .405 1.11l1.433 2.15A1.5 1.5 0 0 0 6.035 16h6.385a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.272-2.715a2 2 0 0 0-1.99-2.199h-.582a5.184 5.184 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.634 2.634 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"/></svg>';
							break;
						case "timer":
							eventIcon = '<svg class="bi bi-clock" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm8-7A8 8 0 1 1 0 8a8 8 0 0 1 16 0z"/><path fill-rule="evenodd" d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/></svg>';
							break;		
					}

					return eventIcon;
				}

			// Function to create the Event Item on left side
				function eventItemCreate(eventArray){

					divEvent =  '<div class="option '+eventList[eventArray][0]+'" id="evntMdl'+eventArray+'" onclick="prepareModalLink(this.id)" data-target="#TrimaScreenModal">';
					divEvent +=  	'<div class="option-header">';
					divEvent +=  		eventIcon;
					divEvent +=  		eventList[eventArray][1];
					divEvent +=  	'</div>';
					divEvent +=  	'<div class="option-content">'+eventList[eventArray][2]+'</div>';
					divEvent +=  '</div>';

					return divEvent;

				}

			function populateEvents(type){
				if(type == "load"){ // Add the defaults itens

					// Create de items on left menu separet by category
						for(var i = 0; i < eventList.length; i++){

							// Define Icons
								eventIconCreate(eventList[i][0]);

							// Create Event Item
								eventItemCreate(i);

							// Check the event category
								if(eventList[i][0] == "barcode" || (eventList[i][0] == "repetition")){
									divEventBarcode += divEvent;
								} 

								if(eventList[i][0] == "information"){
									divEventInfo += divEvent;
								}

								if(eventList[i][0] == "timer"){
									divEventTimer += divEvent;
								}
						}

					//Disable the load option
						document.getElementById("loadDemoOptions").innerHTML = "";

				} else if(type == "add"){ // Add a new item

					var i = eventList.length -1;

						// Define Icons
							eventIconCreate(eventList[i][0]);

						// Create Event Item
							eventItemCreate(i);

						// Check the event category
							if(eventList[i][0] == "barcode" || (eventList[i][0] == "repetition")){
								divEventBarcode += divEvent;

								console.log(divEventBarcode);
							} 

							if(eventList[i][0] == "information" || (eventList[i][0] == "informationBtn")){
								divEventInfo += divEvent;
							}
				}

				// Populate Events list with all Trima Options 
					document.getElementById("eventBarcodeList").innerHTML = divEventBarcode;
					document.getElementById("eventInfoList").innerHTML = divEventInfo;
					document.getElementById("eventTimerList").innerHTML = divEventTimer;
			}

			//Trima Screen Modal Link creator
				//variables: TS = Trima Screen
				function prepareModalLink(evetIdModal) {
				  var TSbgID 	= document.getElementById(evetIdModal).parentNode.id;

				  //Check if the event are in left or right position. If Right, enable the modal event
					  if(TSbgID != "eventBarcodeList" && TSbgID != "eventInfoList" && TSbgID != "eventTimerList"){
					  	document.getElementById(evetIdModal).setAttribute("data-toggle", "modal");
					  }

				  //Extract ID from the evetIdModal
				  	var TSID = evetIdModal.substring(7, 9)

				  var TStl 		= eventList[TSID][1];
				  var TSmg		= eventList[TSID][2];
				  var TSbtnLink	= "";

				  //Create BTN
					  if(eventList[TSID][3]){

					  	for(var i = 0; i < eventList[TSID][3].length; i++){
					  		var TSbtnID = i + 1;
					  		TSbtnLink 	+= "&btn"+TSbtnID+"="+eventList[TSID][3][i];
					  	}

					  } else{
					  	TSbtnLink = "";
					  }


				  //Create Link to Iframe Load all information
				  	document.getElementById("TrimaScreenFrame").src = "assets/events.html?lg="+language('imageFolder')+"&id="+TSbgID+"&title="+TStl+"&message="+TSmg+TSbtnLink;
				}



			//Program Flow Steps - Create and Populate
			var programFlowSteps = {
				"01":
				[
					language('TrimaSteps')[0], //Category Title
					"normal" //Class
				],
				"02":
				[
					language('TrimaSteps')[1], //Category Title
					"normal" //Class
				],
				"03":
				[
					language('TrimaSteps')[2], //Category Title
					"normal" //Class
				],
				"04":
				[
					language('TrimaSteps')[3], //Category Title
					"normal" //Class
				],
				"05":
				[
					language('TrimaSteps')[4], //Category Title
					"normal" //Class
				],
				"06":
				[
					language('TrimaSteps')[5], //Category Title
					"normal" //Class
				],
				"07":
				[
					language('TrimaSteps')[6], //Category Title
					"normal" //Class
				],
				"08":
				[
					language('TrimaSteps')[7], //Category Title
					"normal" //Class
				],
				"09":
				[
					language('TrimaSteps')[8], //Category Title
					"normal" //Class
				],
				"10":
				[
					language('TrimaSteps')[9], //Category Title
					"special" //Class
				],
				"11":
				[
					language('TrimaSteps')[10], //Category Title
					"special" //Class
				],
				"12":
				[
					language('TrimaSteps')[11], //Category Title
					"special" //Class
				],
				"13":
				[
					language('TrimaSteps')[12], //Category Title
					"normal" //Class
				],
				"14":
				[
					language('TrimaSteps')[13], //Category Title
					"normal" //Class
				]
			};

			var total = 14;
			var i = 1;
			var stepId;
			var divFlowSteps = "";
			var divScreenModal = "";
			var stepClass = "";
			var bgLanguage = language('imageFolder');

			while(i <= total){

				//Create ID to use in background settings
					if(i < 10){
						stepId = "0"+i;
					} else {
						stepId = i;
					}
				//Create special background color
					if(programFlowSteps[stepId][1] == "special"){
						stepClass = "procedure-special"
					} else {
						stepClass = "";
					}

				// Create Item in Program Flow List
				divFlowSteps += '<div class="col procedureStep">';
				divFlowSteps += 	'<div class="procedure-header '+stepClass+'" data-toggle="modal" data-target="#Mdl'+stepId+'">'+programFlowSteps[stepId][0]+'</div>';
				divFlowSteps += 	'<div class="column procedure-holder" id="'+stepId+'"></div>';
				divFlowSteps += '</div>';



				// Normal Trima Screen - Modal
					divScreenModal += '<div class="modal fade" id="Mdl'+stepId+'" tabindex="-1" role="dialog" aria-hidden="true">';
					divScreenModal += 	'<div class="modal-dialog" role="document">';
					divScreenModal += 		'<div class="modal-content">';
					divScreenModal += 			'<div class="modal-header">';
					divScreenModal += 				'<h5 class="modal-title">'+programFlowSteps[stepId][0]+'</h5>';
					divScreenModal += 				'<button type="button" class="close" data-dismiss="modal" aria-label="Close">';
					divScreenModal += 					'<span aria-hidden="true">&times;</span>';
					divScreenModal += 				'</button>';
					divScreenModal += 			'</div>';
					divScreenModal += 			'<div class="modal-body">';
					divScreenModal += 				'<img src="assets/img/'+bgLanguage+'/'+stepId+'.png" width="100%">';
					divScreenModal += 			'</div>';
					divScreenModal += 		'</div>';
					divScreenModal += 	'</div>';
					divScreenModal += '</div>';



				i += 1;
			}

			// Populate Program flow steps list with all Trima Options 
				document.getElementById("flowStep").innerHTML = divFlowSteps;

			// Populate Trima Screen - Modal 
				document.getElementById("programScreenModal").innerHTML = divScreenModal;

		</script>


	</body>
</html>
